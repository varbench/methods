FILE(GLOB children RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/*)
SET(dirlist "")
FOREACH(child ${children})
    IF(IS_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${child})
      LIST(APPEND dirlist ${child})
      FILE(GLOB children2 RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/${child}/*)
      FOREACH(child2 ${children2})
            IF(IS_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${child2})
                        LIST(APPEND dirlist ${child2})
            ENDIF()
      ENDFOREACH()
    ENDIF()
ENDFOREACH()

FOREACH(dir ${dirlist})
   IF(NOT EXISTS "${CMAKE_BINARY_DIR}/test/python/data/${dir}")
       MAKE_DIRECTORY(${CMAKE_BINARY_DIR}/test/python/data/${dir})
   ENDIF()
   file(GLOB TEST_FILES "${CMAKE_CURRENT_SOURCE_DIR}/${dir}/*")
   foreach(testfile ${TEST_FILES})
     IF(NOT IS_DIRECTORY ${testfile})
          configure_file(${testfile} ${CMAKE_BINARY_DIR}/test/python/data/${dir} COPYONLY)
     ENDIF()
   endforeach()
ENDFOREACH()

